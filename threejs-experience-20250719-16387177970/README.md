# 万華鏡の世界 - 幻想的なVR空間

## 体験コンセプト

万華鏡の中のように美しい世界を360度パノラマとパーティクル効果で表現した幻想的なVR空間体験です。美しい色彩と光の粒子が踊る没入感のある世界をお楽しみください。

## 特徴

- **360度パノラマビュー**: マウスやタッチで自由に視点を移動
- **動的パーティクル効果**: 1000個の色とりどりの光の粒子
- **音楽統合**: BGMのオン/オフ切り替えと音量調整
- **自動回転機能**: 自動で周囲を見回す機能
- **レスポンシブデザイン**: デスクトップとモバイルデバイス対応
- **WebGLサポートチェック**: 対応していない環境での適切なエラー表示

## 操作方法

### デスクトップ操作
- **マウスドラッグ**: 視点の移動
- **ホイール**: ズームイン/ズームアウト
- **ダブルクリック**: 自動回転の開始/停止

### モバイル操作
- **タッチドラッグ**: 視点の移動
- **ピンチ操作**: ズームイン/ズームアウト

### UIコントロール
- **🎵 音楽ボタン**: BGMのオン/オフ切り替え
- **🔄 回転ボタン**: 自動回転の開始/停止
- **✨ パーティクルボタン**: パーティクル効果の表示/非表示
- **音量スライダー**: BGMの音量調整（0-100%）

## 技術仕様

### 必要な環境
- **WebGL対応ブラウザ**: Chrome、Firefox、Safari、Edge の最新版
- **JavaScript有効**: ブラウザでJavaScriptが有効になっている必要があります
- **音声再生対応**: WAVファイルの再生に対応したブラウザ

### 技術スタック
- **Three.js**: 3Dグラフィックスライブラリ (r128)
- **WebGL**: ハードウェアアクセラレーション対応
- **HTML5 Canvas**: レンダリング
- **Web Audio API**: 音楽再生とボリューム制御

### パフォーマンス仕様
- **パーティクル数**: 1000個
- **フレームレート**: 60fps（デバイス性能による）
- **画面解像度**: デバイスのピクセル比に自動調整（最大2倍）
- **メモリ使用量**: 約50-100MB（ブラウザとデバイスによる）

## ファイル構成

```
threejs-experience-20250719-16387177970/
├── README.md                 # このファイル
├── src/
│   ├── index.html           # メインアプリケーションファイル
│   ├── panorama.jpg         # 360度パノラマ画像 (1.8MB)
│   └── generated-music.wav  # BGM音楽ファイル (6.1MB)
├── assets/
│   └── panorama.jpg         # パノラマ画像（バックアップ）
├── music/
│   └── generated-music.wav  # 音楽ファイル（バックアップ）
└── final/
    └── threejs-experience.zip # 配布用パッケージ
```

## ローカル実行方法

### 方法1: シンプルな実行
1. `src/index.html` をWebブラウザで直接開く
2. ファイルプロトコルでは音楽が再生されない場合があります

### 方法2: ローカルサーバー（推奨）
```bash
# Python 3がインストールされている場合
cd threejs-experience-20250719-16387177970/src
python -m http.server 8000

# Node.jsがインストールされている場合
npx http-server -p 8000

# ブラウザで http://localhost:8000 にアクセス
```

### 方法3: Live Server（VSCode拡張）
1. Visual Studio Codeで `src/index.html` を開く
2. Live Server拡張をインストール
3. 右クリックして「Open with Live Server」を選択

## 対応ブラウザ

### フル対応
- **Chrome 90+**: 全機能対応、最適なパフォーマンス
- **Firefox 88+**: 全機能対応
- **Safari 14+**: 全機能対応（iOS Safari含む）
- **Edge 90+**: 全機能対応

### 制限付き対応
- **Internet Explorer**: WebGL未対応のため動作しません
- **古いモバイルブラウザ**: パフォーマンスが制限される場合があります

## トラブルシューティング

### よくある問題と解決方法

#### 「WebGL サポートエラー」が表示される
- **原因**: ブラウザがWebGLをサポートしていない
- **解決方法**: Chrome、Firefox、Safari等の最新ブラウザを使用してください

#### 音楽が再生されない
- **原因**: ブラウザの自動再生ポリシーまたはファイルアクセス制限
- **解決方法**: 
  1. 音楽ボタンを手動でクリックしてください
  2. ローカルサーバーを使用してアクセスしてください

#### パフォーマンスが悪い
- **原因**: デバイスの性能不足
- **解決方法**:
  1. パーティクル効果をオフにしてください
  2. 他のタブやアプリケーションを閉じてください
  3. ブラウザを再起動してください

#### タッチ操作が効かない
- **原因**: ブラウザのタッチイベント処理
- **解決方法**: ページを再読み込みして、画面をタップしてください

#### 画面が真っ黒になる
- **原因**: パノラマ画像の読み込み失敗
- **解決方法**: 
  1. ネットワーク接続を確認してください
  2. ページを再読み込みしてください
  3. ローカルサーバーを使用してください

### パフォーマンス最適化設定

低性能デバイスでの動作改善:
```javascript
// デバイス性能に応じた自動調整
// - パーティクル数の動的調整
// - レンダリング品質の自動調整
// - フレームレート制限
```

## セキュリティとプライバシー

- **外部通信**: Three.js CDNからのライブラリ読み込みのみ
- **データ収集**: 一切のユーザーデータを収集しません
- **ローカル実行**: 完全にオフラインで動作可能
- **権限要求**: カメラ、マイク等へのアクセスは行いません

## ライセンス

このプロジェクトはMITライセンスの下で配布されています。

### 使用ライブラリ
- **Three.js**: MIT License
- **Web Audio API**: W3C標準仕様

## 開発情報

- **作成日**: 2025年7月19日
- **バージョン**: 1.0.0
- **対象ブラウザ**: モダンWebGL対応ブラウザ
- **テスト環境**: Chrome 126+, Firefox 127+, Safari 17+

## サポート

問題が発生した場合は、以下を確認してください:
1. ブラウザのJavaScriptコンソールでエラーメッセージを確認
2. ブラウザのWebGLサポート状況を確認
3. デバイスの性能とメモリ使用量を確認

---

**万華鏡の中のように美しい世界をお楽しみください** ✨