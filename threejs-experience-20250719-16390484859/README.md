# Three.js パーティクル色変更テスト - 美しい庭園

## 🌟 体験コンセプト

美しい庭園のパノラマ画像を背景に、リアルタイムで色変更可能な星形パーティクルが舞い踊るインタラクティブな3D体験です。WebGLとThree.jsを使用した没入感のある視覚体験をお楽しみください。

## 🎮 操作方法

### マウス操作
- **ドラッグ**: 視点の移動（360度回転）
- **ホイール**: ズームイン/ズームアウト（1倍〜20倍）
- **ダブルクリック**: 自動回転のON/OFF切り替え

### タッチ操作（モバイル対応）
- **スワイプ**: 視点の移動
- **ピンチ**: ズーム操作
- **ダブルタップ**: 自動回転の切り替え

### パーティクル色変更コントロール
- **色モード選択**:
  - 単色: 選択した1色でパーティクルを表示
  - グラデーション: 複数色のグラデーション効果
  - レインボー: 虹色に連続変化（デフォルト）

- **色選択**:
  - カラーピッカーでカスタム色選択
  - 8つのプリセット色からワンクリック選択

## 🛠️ 技術仕様

### 使用技術
- **Three.js r128**: 3Dグラフィックスライブラリ
- **WebGL**: ハードウェアアクセラレーション対応
- **HTML5 Canvas**: レンダリング出力
- **ES6 JavaScript**: モダンJavaScript機能
- **CSS3**: レスポンシブデザイン

### パフォーマンス仕様
- **パーティクル数**: 2,500個の星形パーティクル
- **フレームレート**: 60FPS（デバイス性能に依存）
- **メモリ使用量**: 約50-100MB（ブラウザ+3Dコンテンツ）
- **パノラマ画像**: 2.1MB（高解像度）

### 対応ブラウザ
- **Chrome**: 57以降
- **Firefox**: 51以降
- **Safari**: 11以降
- **Edge**: 79以降
- **モバイルブラウザ**: iOS Safari 11+, Chrome Mobile 57+

## 🚀 ローカル実行方法

### 方法1: 直接実行（推奨）
```bash
# プロジェクトディレクトリに移動
cd threejs-experience-20250719-16390484859/src

# ローカルサーバーで実行（Python 3の場合）
python -m http.server 8000

# ブラウザでアクセス
# http://localhost:8000
```

### 方法2: Node.js使用
```bash
# グローバルにhttp-serverをインストール
npm install -g http-server

# プロジェクトディレクトリで実行
cd threejs-experience-20250719-16390484859/src
http-server -p 8000

# ブラウザでアクセス
# http://localhost:8000
```

### 方法3: VS Code Live Server
1. VS Codeで`src/index.html`を開く
2. 右クリック → "Open with Live Server"
3. 自動でブラウザが開きます

## 🔧 WebGL要件

### 必要システム要件
- **GPU**: WebGL対応グラフィックスカード
- **RAM**: 4GB以上推奨
- **CPU**: デュアルコア以上

### WebGL確認方法
1. ブラウザで https://get.webgl.org/ にアクセス
2. WebGL 1.0のサポートを確認
3. WebGL 2.0対応の場合、より良いパフォーマンス

## 📱 モバイル対応

### 対応デバイス
- **iOS**: iPhone 7以降、iPad (第5世代)以降
- **Android**: Android 7.0以降、RAM 3GB以上推奨

### モバイル最適化機能
- タッチ操作対応
- レスポンシブUI
- 自動パフォーマンス調整
- バッテリー使用量最適化

## 🐛 トラブルシューティング

### よくある問題と解決方法

#### 1. 画面が真っ黒になる
**原因**: WebGLが無効またはサポートされていない
**解決方法**:
- ブラウザでWebGLを有効化
- GPU ドライバーを最新版に更新
- 別のブラウザで試行

#### 2. パフォーマンスが悪い
**原因**: GPU性能不足またはブラウザのハードウェアアクセラレーション無効
**解決方法**:
- ブラウザのハードウェアアクセラレーションを有効化
- 他のタブやアプリケーションを閉じる
- ズームレベルを調整してパーティクル数を実質的に減らす

#### 3. モバイルで操作できない
**原因**: タッチイベントが正しく処理されていない
**解決方法**:
- ページを再読み込み
- ブラウザキャッシュをクリア
- 画面を縦向き/横向きに切り替えてみる

#### 4. 色が変更されない
**原因**: JavaScript エラーまたはUI要素が正しく読み込まれていない
**解決方法**:
- ブラウザの開発者ツール(F12)でエラーを確認
- ページを再読み込み
- 色モードが「単色」に設定されているか確認

#### 5. パノラマ画像が表示されない
**原因**: 画像ファイルのパスまたはCORS問題
**解決方法**:
- ローカルサーバー経由でアクセス（file://プロトコルは使用不可）
- 画像ファイル(`panorama.jpg`)の存在確認
- ネットワーク接続確認

### パフォーマンス最適化設定

#### 低性能デバイス向け調整
HTMLファイルの以下の値を調整:
```javascript
// パーティクル数を減らす（行288）
const particleCount = 1000; // デフォルト: 2500

// フレームレート制限（animate関数内に追加）
setTimeout(() => requestAnimationFrame(animate), 1000/30); // 30FPS制限
```

#### 高性能デバイス向け強化
```javascript
// パーティクル数を増やす
const particleCount = 5000; // より多くのパーティクル

// アンチエイリアス強化
renderer = new THREE.WebGLRenderer({ 
    antialias: true,
    powerPreference: "high-performance"
});
```

## 📂 ファイル構成

```
threejs-experience-20250719-16390484859/
├── README.md                 # このファイル
├── src/
│   ├── index.html            # メインHTMLファイル
│   └── panorama.jpg          # パノラマ背景画像（2.1MB）
├── assets/
│   └── panorama.jpg          # 背景画像のコピー
├── images/
│   └── generated-image.png   # 生成された画像（参考用）
└── final/
    └── threejs-experience.zip # 配布用パッケージ
```

## 🔒 セキュリティ

- 外部依存関係: Three.js のみ（CDN経由）
- ローカルファイルアクセス: 画像ファイルのみ
- ネットワーク通信: Three.js CDN読み込み時のみ
- ユーザーデータ: 収集・保存なし

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。
Three.js ライブラリは独自のライセンス条項に従います。

## 🎯 開発目的

このプロジェクトは以下の技術検証を目的として開発されました:
- パーティクルシステムの色変更機能
- インタラクティブな3D操作インターフェース
- WebGLパフォーマンス最適化
- モバイルデバイス対応
- 美しい視覚効果とUX設計

## 📞 サポート

問題が解決しない場合は、以下の情報と共にお問い合わせください:
- 使用ブラウザとバージョン
- OS とデバイス情報
- 発生した具体的なエラーメッセージ
- 実行手順

---

**作成日**: 2025年7月19日  
**プロジェクトID**: threejs-experience-20250719-16390484859  
**Three.js バージョン**: r128