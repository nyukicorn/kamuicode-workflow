# Three.js Panoramic Experience - Flower Field
**動的パーティクル機能テスト用の花畑**

## 🌸 体験コンセプト
美しい花畑のパノラマ環境で、インタラクティブな動的パーティクルシステムを体験できるThree.js Webアプリケーションです。ユーザーは5種類の異なるパーティクル形状（ハート、円、四角、三角、星）を切り替えながら、360度のパノラマ空間を自由に探索できます。

## 🎮 操作方法

### デスクトップ（マウス操作）
- **視点移動**: マウスドラッグで360度の視点回転
- **ズーム**: マウスホイールでズームイン/アウト（FOV: 30-120度）
- **自動回転**: ダブルクリックで自動回転モード切り替え
- **パーティクル変更**: 画面下部のボタンで形状選択

### モバイル（タッチ操作）
- **視点移動**: シングルタッチドラッグで360度回転
- **パーティクル変更**: 画面下部のボタンタップ
- **自動回転**: ダブルタップで自動回転モード

### パーティクル形状
- 💖 **Heart** (ピンク) - ハート形の数学的曲線
- ⭕ **Circle** (シアン) - 円形分布
- ⬜ **Square** (黄色) - 四角形分布
- 🔺 **Triangle** (緑) - 三角形分布
- ⭐ **Star** (金色) - 星形の放射状分布

## 🛠️ 技術仕様

### 必要システム要件
- **ブラウザ**: WebGL対応ブラウザ（Chrome 9+, Firefox 4+, Safari 5.1+, Edge 12+）
- **JavaScript**: ES6対応
- **メモリ**: 最小2GB RAM推奨
- **GPU**: WebGL対応グラフィックカード

### 技術スタック
- **Three.js**: r128 (CDN経由)
- **WebGL**: ハードウェア加速3Dレンダリング
- **HTML5 Canvas**: レンダリング出力
- **CSS3**: レスポンシブUI、アニメーション
- **JavaScript ES6**: モジュラー設計

### パフォーマンス仕様
- **パーティクル数**: 2,000個（形状別最適化）
- **フレームレート**: 60FPS目標
- **レンダリング**: アンチエイリアス有効
- **ピクセル比**: デバイス対応（最大2.0）

## 🚀 ローカル実行方法

### 1. ファイル準備
```bash
# プロジェクトディレクトリに移動
cd threejs-experience-20250719-16390360407/src/

# 必要ファイル確認
ls -la
# index.html, panorama.jpg が存在することを確認
```

### 2. HTTPサーバー起動（必須）
**注意**: ファイルプロトコル（file://）では動作しません。HTTPサーバーが必要です。

#### Python 3
```bash
python -m http.server 8000
```

#### Python 2
```bash
python -m SimpleHTTPServer 8000
```

#### Node.js
```bash
npx http-server -p 8000
```

#### PHP
```bash
php -S localhost:8000
```

### 3. ブラウザアクセス
```
http://localhost:8000
```

## 🌐 対応ブラウザ

### 完全対応
- **Chrome**: 90+ (推奨)
- **Firefox**: 88+
- **Safari**: 14+
- **Edge**: 90+

### 制限付き対応
- **Internet Explorer**: 非対応（WebGL制限）
- **古いモバイルブラウザ**: パフォーマンス制限あり

### モバイル最適化
- **iOS Safari**: 12+
- **Chrome Mobile**: 90+
- **Samsung Internet**: 14+

## 🔧 トラブルシューティング

### よくある問題と解決方法

#### 1. 「WebGLがサポートされていません」エラー
**原因**: ブラウザまたはGPUのWebGL無効
**解決策**:
- ブラウザを最新版に更新
- ハードウェアアクセラレーション有効化
- Chrome: `chrome://flags/#enable-webgl`

#### 2. パノラマ画像が表示されない
**原因**: HTTPサーバー未使用またはCORS制限
**解決策**:
- HTTPサーバー経由でアクセス
- ローカルファイルでは動作しません

#### 3. パフォーマンスが低い
**原因**: GPU性能不足またはブラウザ制限
**解決策**:
- タブを少なくする
- ハードウェアアクセラレーション確認
- ブラウザ再起動

#### 4. タッチ操作が反応しない
**原因**: イベントハンドラーの問題
**解決策**:
- ページリロード
- 他のブラウザで試行

#### 5. 自動回転が停止しない
**原因**: イベントリスナーの重複
**解決策**:
- ダブルクリック/タップで切り替え
- ページリフレッシュ

### デバッグ情報
ブラウザの開発者ツール（F12）のコンソールで以下を確認：
- WebGL対応状況
- パノラマ画像読み込み状況
- パーティクル生成ログ
- エラーメッセージ詳細

### パフォーマンス最適化
- **高解像度ディスプレイ**: 自動的にピクセル比調整
- **メモリ管理**: パーティクル形状変更時にリソース解放
- **レンダリング最適化**: requestAnimationFrame使用

## 📁 ファイル構造
```
threejs-experience-20250719-16390360407/
├── src/
│   ├── index.html          # メインアプリケーション
│   └── panorama.jpg        # パノラマ背景画像 (1.7MB)
├── assets/
│   └── panorama.jpg        # バックアップ画像
└── README.md              # このファイル
```

## 📊 技術詳細

### パーティクルシステム
- **BufferGeometry**: 高性能頂点管理
- **PointsMaterial**: GPU最適化描画
- **数学的形状生成**: 各形状の専用アルゴリズム

### カメラ制御
- **PerspectiveCamera**: 75度FOV、0.1-1000深度
- **スムーズ補間**: 0.1係数のlinear interpolation
- **制限付き回転**: X軸±90度制限

### パノラマレンダリング
- **SphereGeometry**: 500半径、60x40セグメント
- **内側反転**: scale(-1,1,1)で内側向きレンダリング
- **TextureLoader**: 非同期画像読み込み

## 🔒 セキュリティ考慮事項
- CDN経由のThree.js読み込み（SRIハッシュ推奨）
- XSS対策: DOM要素の安全な操作
- ローカルファイルアクセス制限対応

## 🎯 今後の拡張可能性
- 音響効果統合（Web Audio API）
- VR対応（WebXR）
- カスタムパーティクル形状追加
- マルチテクスチャ背景
- パフォーマンス統計UI

---
**開発環境**: Three.js r128, WebGL 1.0/2.0, ES6
**最終更新**: 2025年7月19日