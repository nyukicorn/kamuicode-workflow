# 桜の万華鏡世界 - Three.js 3D体験

美しい桜をテーマにした万華鏡のような3D空間で、音楽と共に楽しむインタラクティブなWeb体験です。

## 🌸 体験コンセプト

桜の花びらが舞い踊る幻想的な3D空間を、万華鏡のような美しい視覚効果で表現しています。音楽と連動したパーティクルアニメーションが、まるで桜の森の中にいるような没入感を提供します。

## 🎮 操作方法

### マウス操作
- **ドラッグ**: 視点を360度自由に移動
- **ホイール**: ズームイン・ズームアウト
- **ダブルクリック**: 自動回転のオン/オフ切り替え

### タッチ操作（モバイル対応）
- **スワイプ**: 視点移動
- **ピンチ**: ズーム（ブラウザによる）
- **ダブルタップ**: 自動回転切り替え

### コントロールパネル
- **音楽コントロール**: BGMの再生/停止
- **パーティクル色モード**: 単色/グラデーション/レインボー
- **カラーピッカー**: ベース色の変更
- **回転速度**: 自動回転の速度調整
- **パーティクルサイズ**: 桜の花びらサイズ変更
- **パーティクル数**: 表示する花びらの数（100-5000個）

## 🛠 技術仕様

### 必要な環境
- **WebGL対応ブラウザ**: Chrome, Firefox, Safari, Edge（最新版推奨）
- **JavaScript**: ES2015+ 対応
- **音楽再生**: HTML5 Audio API 対応

### 使用技術
- **Three.js**: r128 (CDN経由)
- **WebGL**: ハードウェアアクセラレーション3Dグラフィック
- **HTML5 Audio**: BGM再生機能
- **CSS3**: レスポンシブデザイン
- **Vanilla JavaScript**: フレームワーク非依存

### ファイル構成
```
threejs-experience-20250720-16394914402/
├── src/
│   ├── index.html          # メインアプリケーション
│   ├── panorama.jpg        # 背景パノラマ画像 (1.9MB)
│   └── generated-music.wav # BGM音楽ファイル (6.1MB)
├── assets/
│   └── panorama.jpg        # バックアップ画像
├── music/
│   └── generated-music.wav # 音楽ファイル
└── README.md              # このファイル
```

## 🚀 ローカル実行方法

### 1. ファイルの準備
```bash
# プロジェクトをダウンロード・展開
unzip threejs-experience.zip
cd threejs-experience-20250720-16394914402
```

### 2. ローカルサーバーで実行
セキュリティ制限により、ファイルを直接開くのではなく、ローカルサーバー経由で実行してください。

#### Python (推奨)
```bash
# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

#### Node.js
```bash
# npx使用（Node.js インストール済みの場合）
npx http-server -p 8000

# または live-server
npx live-server --port=8000
```

#### その他
- VS Code: Live Server拡張機能
- WebStorm: 内蔵サーバー機能
- XAMPP, WAMP等のローカル開発環境

### 3. ブラウザでアクセス
```
http://localhost:8000/src/
```

## 🌐 対応ブラウザ

### デスクトップ
- ✅ Chrome 80+
- ✅ Firefox 75+
- ✅ Safari 13+
- ✅ Edge 80+

### モバイル
- ✅ Mobile Chrome (Android)
- ✅ Mobile Safari (iOS)
- ✅ Samsung Internet
- ⚠️ 古いブラウザ: WebGL未対応の場合は動作しません

## 🎵 音楽機能

- **自動生成BGM**: AIによって生成された桜テーマの音楽
- **ループ再生**: シームレスなBGMループ
- **音量調整**: デフォルト70%音量
- **オン/オフ制御**: ユーザーによる音楽の切り替え可能

## 🎨 カスタマイズ機能

### 色彩モード
1. **単色モード**: 選択した色での統一表示
2. **グラデーションモード**: 同系色の美しいグラデーション（デフォルト）
3. **レインボーモード**: 虹色のカラフルな表示

### パフォーマンス調整
- パーティクル数を調整してパフォーマンスを最適化
- 低スペック端末では100-500個に設定推奨
- 高性能端末では2000-5000個で美しい表示

## 🔧 トラブルシューティング

### よくある問題

#### 「WebGLがサポートされていません」エラー
- **原因**: 古いブラウザまたはWebGL無効
- **解決策**: 
  - 最新ブラウザに更新
  - WebGLを有効にする（chrome://settings/content/webgl）
  - ハードウェアアクセラレーションを有効にする

#### 音楽が再生されない
- **原因**: ファイル読み込みエラーまたはブラウザ制限
- **解決策**: 
  - ローカルサーバー経由でアクセス
  - ブラウザの音声自動再生設定を確認
  - 手動で音楽ボタンをクリック

#### 表示が重い・カクつく
- **原因**: デバイス性能不足
- **解決策**: 
  - パーティクル数を減らす（100-500個）
  - ブラウザのハードウェアアクセラレーションを確認
  - 他のタブ・アプリを閉じる

#### 画像が表示されない
- **原因**: ファイルパス問題
- **解決策**: 
  - ローカルサーバー使用
  - ファイル構成を確認
  - コンソールでエラーメッセージ確認

### デバッグ方法
1. ブラウザの開発者ツール（F12）を開く
2. コンソールタブでエラーメッセージを確認
3. ネットワークタブでファイル読み込み状況を確認

## 🔒 セキュリティ・プライバシー

- **外部通信**: Three.js CDNのみ（cdnjs.cloudflare.com）
- **データ収集**: なし
- **クッキー使用**: なし
- **ローカル実行**: 完全にオフラインで動作可能

## 📱 モバイル最適化

- **レスポンシブデザイン**: 画面サイズ自動調整
- **タッチ操作対応**: スワイプ・タップに対応
- **パフォーマンス**: モバイル向け設定推奨
- **バッテリー配慮**: パーティクル数で調整可能

## 🚀 パフォーマンス推奨設定

### 高性能デバイス
- パーティクル数: 2000-5000
- サイズ: 0.8-1.5
- 回転速度: 0.01-0.03

### 標準デバイス
- パーティクル数: 1000-2000
- サイズ: 0.5-1.0
- 回転速度: 0.005-0.02

### 低性能デバイス
- パーティクル数: 100-500
- サイズ: 0.3-0.8
- 回転速度: 0.001-0.01

## 📄 ライセンス

このプロジェクトは教育・研究目的で作成されています。
- Three.js: MIT License
- 生成素材: AI生成（著作権フリー）

---

**製作**: KamuiCode Workflow  
**作成日**: 2025年7月20日  
**バージョン**: 1.0.0

🌸 美しい桜の世界をお楽しみください！ 🌸