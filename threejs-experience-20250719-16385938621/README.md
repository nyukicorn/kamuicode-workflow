# 色とりどりの花が咲き乱れる花園 - Three.js体験

## 🌸 体験コンセプト

美しい花園の中を自由に見回せるインタラクティブな3D体験です。色とりどりの花びらが舞い踊る幻想的な空間で、癒しの音楽と共にリラックスしたひとときをお楽しみいただけます。

### 特徴
- **没入感のあるパノラマ環境**: 360度の美しい花園風景
- **動的パーティクルシステム**: 3000個の色とりどりの花びらがリアルタイムで舞い踊る
- **音楽統合機能**: BGMのオン/オフ切り替えと音量調整
- **レスポンシブデザイン**: デスクトップ・タブレット・スマートフォン対応
- **直感的な操作**: マウス・タッチ・キーボードによる自然な操作

## 🎮 操作方法

### デスクトップ（マウス）
- **🖱️ ドラッグ**: 視点を360度自由に移動
- **🖲️ ホイール**: ズームイン・ズームアウト
- **👆 ダブルクリック**: 自動回転のオン/オフ切り替え

### モバイル（タッチ）
- **👆 ドラッグ**: 視点移動
- **🤏 ピンチ**: ズームイン・ズームアウト
- **👆 ダブルタップ**: 自動回転切り替え

### UI コントロール
- **🎵 音楽 ON/OFF**: 背景音楽の再生切り替え
- **🔄 自動回転 ON/OFF**: カメラの自動回転切り替え
- **音量スライダー**: BGMの音量調整（0-100%）

## 🔧 技術仕様

### 必要要件
- **WebGL対応ブラウザ** （必須）
- **JavaScript有効** （必須）
- **音声再生対応** （BGM機能のため推奨）

### 使用技術
- **Three.js r128**: 3Dレンダリングエンジン
- **WebGL**: ハードウェアアクセラレーション
- **Web Audio API**: 音楽再生制御
- **Canvas API**: レンダリング表面
- **Touch Events**: モバイル対応

### パフォーマンス最適化
- **アンチエイリアス**: 滑らかな描画
- **デバイスピクセル比対応**: 高解像度ディスプレイ最適化
- **効率的なパーティクルシステム**: BufferGeometry使用
- **適応的品質**: デバイス性能に応じた調整

## 🚀 ローカル実行方法

### 1. ファイル構成確認
```
threejs-experience-20250719-16385938621/
├── src/
│   ├── index.html          # メインファイル
│   ├── panorama.jpg        # パノラマ背景画像
│   └── generated-music.wav # BGM音楽ファイル
└── README.md              # このファイル
```

### 2. ローカルサーバーの起動

#### Python 3を使用する場合:
```bash
cd src
python -m http.server 8000
```

#### Python 2を使用する場合:
```bash
cd src
python -m SimpleHTTPServer 8000
```

#### Node.jsを使用する場合:
```bash
cd src
npx http-server -p 8000
```

### 3. ブラウザでアクセス
```
http://localhost:8000
```

## 🌐 対応ブラウザ

### 完全対応
- **Chrome 90+** ✅
- **Firefox 88+** ✅
- **Safari 14+** ✅
- **Edge 90+** ✅

### モバイル対応
- **Chrome Mobile 90+** ✅
- **Safari iOS 14+** ✅
- **Samsung Internet 15+** ✅

### 注意事項
- Internet Explorer は**非対応**です
- WebGLサポートが必須です
- 古いブラウザでは一部機能が制限される場合があります

## 📱 デバイス要件

### 推奨スペック
- **RAM**: 2GB以上
- **GPU**: WebGL対応GPU
- **画面解像度**: 1024×768以上

### モバイル対応
- **iOS**: 14.0以上
- **Android**: 8.0以上（API level 26+）
- **タッチスクリーン**: マルチタッチ対応

## 🎵 音楽機能

### BGM制御
- **自動再生**: ページ読み込み時は停止状態
- **ユーザー操作**: ボタンクリックで再生開始
- **音量調整**: 0-100%の範囲で調整可能
- **ループ再生**: 音楽は自動的にループします

### 音声フォーマット
- **WAV形式**: 高品質音楽ファイル
- **サイズ**: 約6.1MB
- **長さ**: 約2分のループ楽曲

## 🛠️ トラブルシューティング

### よくある問題と解決法

#### 1. 画面が真っ黒で何も表示されない
**原因**: WebGLが無効またはサポートされていない
**解決法**: 
- ブラウザの設定でWebGLを有効にする
- 最新ブラウザにアップデート
- グラフィックドライバーを更新

#### 2. パノラマ画像が読み込まれない
**原因**: ファイルパスの問題またはCORSエラー
**解決法**: 
- ローカルサーバーを使用してアクセス
- `file://`プロトコルでの直接アクセスを避ける
- ファイル配置を確認

#### 3. 音楽が再生されない
**原因**: ブラウザの自動再生ポリシー
**解決法**: 
- 音楽ボタンを手動でクリック
- ブラウザの音量設定を確認
- 音声ファイルのパスを確認

#### 4. 動作が重い・カクつく
**原因**: デバイスの性能不足
**解決法**: 
- 他のタブ・アプリケーションを閉じる
- ブラウザを再起動
- より高性能なデバイスを使用

#### 5. タッチ操作が効かない
**原因**: タッチイベントの設定問題
**解決法**: 
- ページをリロード
- モバイルブラウザで開く
- ブラウザのタッチ設定を確認

### エラーメッセージ対応

| エラー | 原因 | 解決法 |
|--------|------|--------|
| "WebGLがサポートされていません" | WebGL非対応 | 対応ブラウザを使用 |
| "パノラマ画像の読み込みに失敗" | ファイル不存在 | ファイル配置確認 |
| "音楽利用不可" | 音声ファイルエラー | ファイル形式確認 |

## 🔒 セキュリティ

### 実装済みセキュリティ対策
- **XSS対策**: 外部入力の適切なエスケープ
- **CORS対応**: 適切なオリジン設定
- **CSP準拠**: Content Security Policy対応
- **イベント制御**: 適切なイベントリスナー管理

### プライバシー
- **個人情報収集なし**: ユーザーデータは収集しません
- **外部通信なし**: CDNからのライブラリ読み込みのみ
- **ローカル実行**: 完全にローカル環境で動作

## 📊 パフォーマンス指標

### 最適化項目
- **初期読み込み時間**: 約3-5秒
- **フレームレート**: 60fps（対応デバイス）
- **メモリ使用量**: 約100-200MB
- **ファイルサイズ合計**: 約11MB

### 監視指標
- **WebGL描画パフォーマンス**: Three.js stats
- **音声再生遅延**: 最小化済み
- **レスポンシブ対応**: 全画面サイズ対応

## 📄 ライセンス

このプロジェクトは体験デモンストレーション用途で作成されています。

### 使用ライブラリ
- **Three.js**: MIT License
- **Generated Assets**: 本プロジェクト用に生成

## 🤝 サポート

ご質問やお困りの際は、以下をご確認ください：

1. このREADMEのトラブルシューティング項目
2. ブラウザのコンソールエラーメッセージ
3. デバイスの対応状況確認

---

**🌸 美しい花園の世界をお楽しみください！ 🌸**