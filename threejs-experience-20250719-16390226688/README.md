# 花の万華鏡 - 幻想的な3D体験

## 概要

この作品は、花をテーマにした万華鏡の幻想的な世界をWebGL/Three.jsで表現したインタラクティブな3D体験です。美しいパノラマ背景と3000個のカラフルなパーティクルが織りなす、没入感のある視覚体験をお楽しみいただけます。

### 体験コンセプト
- **テーマ**: 花がテーマの万華鏡の幻想的な世界
- **音楽統合**: BGMオン/オフ制御機能付き
- **インタラクティブ**: マウス、キーボード、タッチデバイス対応
- **レスポンシブ**: デスクトップ・モバイル両対応

## 主な機能

### ビジュアル機能
- 360度パノラマ背景（高解像度花のテーマ画像）
- 3000個の動的パーティクル（星、円、四角、三角、ハート形状）
- スムーズなカメラ操作とズーム機能
- 自動回転モード
- リアルタイム光源とフォグ効果

### 音響機能
- BGM自動再生/停止制御
- 音量調整機能
- ページ非表示時の自動一時停止

### 操作機能
- マウスドラッグによる視点移動
- ホイールによるズーム
- ダブルクリックによる自動回転ON/OFF
- タッチデバイス対応（スワイプ操作）
- パーティクル形状の動的切り替え

## 操作方法

### デスクトップ
- **🖱️ マウスドラッグ**: 視点移動
- **🎢 ホイール**: ズームイン/アウト
- **🔄 ダブルクリック**: 自動回転ON/OFF切り替え
- **⭐ パーティクルボタン**: 下部ボタンでパーティクル形状変更

### モバイル・タブレット
- **📱 タッチ&スワイプ**: 視点移動
- **🔄 ダブルタップ**: 自動回転ON/OFF切り替え
- **⭐ パーティクルボタン**: 下部ボタンでパーティクル形状変更

### 音響制御
- **🎵 音楽ボタン**: BGMの再生/停止
- **🔊 音量ボタン**: 音量のオン/オフ

## 技術仕様

### 必要な技術要件
- **WebGL**: WebGL対応ブラウザ必須
- **JavaScript**: ES6+対応
- **Three.js**: r128 (CDN経由で自動読み込み)
- **音声**: HTML5 Audio API

### パフォーマンス要件
- **推奨解像度**: 1920x1080以上
- **最小解像度**: 1024x768
- **パーティクル数**: 3000個（デバイス性能に応じて自動調整）
- **メモリ使用量**: 約50-100MB

### ファイルサイズ
- **パノラマ画像**: 2.3MB (JPEGフォーマット)
- **BGM音楽**: 6.0MB (WAVフォーマット)
- **総容量**: 約8.5MB

## インストール・実行方法

### 方法1: ローカルWebサーバー（推奨）
```bash
# Python 3がインストールされている場合
cd threejs-experience-20250719-16390226688/src
python -m http.server 8000

# Node.jsがインストールされている場合
npx serve .

# ブラウザで以下にアクセス
http://localhost:8000
```

### 方法2: 直接ファイル実行
```bash
# srcディレクトリ内のindex.htmlをブラウザで直接開く
# 注意: 一部のブラウザではセキュリティ制限により音声が再生されない場合があります
```

### 方法3: Live Server（VS Code拡張機能）
1. VS Codeで`src/index.html`を開く
2. Live Server拡張機能をインストール
3. 右クリック → "Open with Live Server"

## 対応ブラウザ

### フル対応
- **Chrome**: 60+
- **Firefox**: 60+
- **Safari**: 12+
- **Edge**: 80+

### 制限付き対応
- **Safari (iOS)**: 13+ （音声自動再生に制限あり）
- **Chrome Mobile**: 60+
- **Firefox Mobile**: 60+

### 非対応
- Internet Explorer（WebGL制限のため）
- 古いモバイルブラウザ（WebGL非対応）

## ファイル構成

```
threejs-experience-20250719-16390226688/
├── README.md                 # このファイル
├── src/
│   ├── index.html           # メインHTMLファイル
│   ├── panorama.jpg         # パノラマ背景画像
│   └── generated-music.wav  # BGM音楽ファイル
├── assets/
│   └── panorama.jpg         # バックアップ画像
├── music/
│   └── generated-music.wav  # バックアップ音楽
└── final/                   # 配布用ファイル
```

## トラブルシューティング

### 問題: 画面が黒い、または何も表示されない
**原因**: WebGLが無効、またはグラフィックドライバの問題
**解決策**:
1. ブラウザでWebGLが有効か確認: `chrome://gpu/`
2. グラフィックドライバを最新版に更新
3. ハードウェアアクセラレーションを有効化

### 問題: 音楽が再生されない
**原因**: ブラウザの自動再生ポリシー
**解決策**:
1. 🎵音楽ボタンを手動でクリック
2. ブラウザの音声設定を確認
3. HTTPSサーバーでの実行を推奨

### 問題: 動作が重い、カクつく
**原因**: デバイスの性能不足
**解決策**:
1. 他のアプリケーションを終了
2. ブラウザのタブを減らす
3. ズームアウトしてパーティクル表示数を削減

### 問題: タッチ操作が効かない
**原因**: タッチイベントの衝突
**解決策**:
1. ページを再読み込み
2. ブラウザのキャッシュをクリア
3. モバイル用ブラウザの使用を推奨

### 問題: パーティクルが表示されない
**原因**: シェーダーコンパイルエラー
**解決策**:
1. F12開発者ツールでコンソールエラーを確認
2. WebGL対応を再確認
3. ブラウザを再起動

## 開発情報

### 使用技術
- **Three.js r128**: 3Dグラフィックライブラリ
- **WebGL**: ハードウェアアクセラレーション
- **HTML5 Canvas**: レンダリング表面
- **ES6 Classes**: オブジェクト指向設計
- **CSS3**: レスポンシブデザイン

### パフォーマンス最適化
- パーティクルシステムの効率的な実装
- テクスチャサイズの最適化
- フレームレート制御
- メモリリーク防止

### セキュリティ考慮事項
- XSS攻撃対策済み
- セキュアなファイルパス使用
- 外部リソースの安全な読み込み

## ライセンス

このプロジェクトは教育・デモンストレーション用途で作成されています。商用利用する場合は、使用している画像・音楽素材のライセンスを個別に確認してください。

## 作成者情報

- **作成日**: 2025年7月19日
- **技術スタック**: Three.js, WebGL, HTML5, CSS3, JavaScript ES6+
- **対象**: Webベース3D体験デモンストレーション

---

🌸 花の万華鏡の幻想的な世界をお楽しみください！ 🌸