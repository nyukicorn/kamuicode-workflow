# 🌸 桜の万華鏡 - Cherry Blossom Kaleidoscope

## 体験コンセプト

桜をテーマにした万華鏡のような美しい世界を体験できるインタラクティブなThree.js体験です。360度パノラマ空間の中で、数千の桜色のパーティクルが美しく舞い踊り、BGMと共に心癒される時間をお楽しみいただけます。

## 🎮 操作方法

### マウス操作
- **ドラッグ**: 視点の移動（上下左右に画面を回転）
- **ホイール**: ズームイン/ズームアウト
- **ダブルクリック**: 自動回転モードのON/OFF切替

### タッチ操作（モバイル対応）
- **スワイプ**: 視点の移動
- **ダブルタップ**: 自動回転モードのON/OFF切替

### リアルタイム調整パネル
画面右上のコントロールパネルで以下の調整が可能です：

#### 🎨 パーティクル色
- **単色**: 選択した単一の色でパーティクルを表示
- **グラデ**: 選択した色をベースにグラデーション効果
- **虹色**: レインボーカラーでカラフルに表示

#### 🌸 リアルタイム調整
- **回転速度**: 自動回転の速度調整（0.001～0.05）
- **パーティクルサイズ**: 桜のパーティクルの大きさ（0.1～3.0）
- **パーティクル数**: 表示するパーティクルの数（100～5000個）

### 🎵 音楽コントロール
画面左下で音楽の操作が可能です：
- **再生/一時停止**: BGMの再生制御
- **停止**: BGMを停止して最初に戻す
- **音量調整**: 音量レベルの調整（0～100%）

## 🔧 技術仕様

### 必要な環境
- **WebGL対応ブラウザ**: 最新のChrome、Firefox、Safari、Edge
- **JavaScript有効**: インタラクティブ機能のため必須
- **音声再生対応**: BGM機能のため推奨

### 使用技術
- **Three.js**: 3Dグラフィックスライブラリ（CDN: r128）
- **WebGL**: ハードウェアアクセラレーション
- **HTML5 Audio**: BGM再生機能
- **CSS3**: レスポンシブデザイン対応

### パフォーマンス要件
- **GPU**: WebGL対応のグラフィックカード
- **メモリ**: 512MB以上のRAM推奨
- **ネットワーク**: 初回読み込み時に約8MB のダウンロード

## 🚀 ローカル実行方法

### 1. ファイルの配置
```
threejs-experience-20250720-16394913404/
├── src/
│   ├── index.html          # メインHTMLファイル
│   ├── panorama.jpg        # パノラマ背景画像（1.1MB）
│   └── generated-music.wav # BGM音楽ファイル（6.3MB）
├── assets/
│   └── panorama.jpg        # バックアップ画像
├── music/
│   └── generated-music.wav # バックアップ音楽
└── README.md              # このファイル
```

### 2. ローカルサーバーの起動
セキュリティ制限により、ファイルを直接ブラウザで開くことはできません。以下のいずれかの方法でローカルサーバーを起動してください：

#### Python（推奨）
```bash
# Python 3の場合
cd threejs-experience-20250720-16394913404/src
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

#### Node.js
```bash
# http-serverをインストール
npm install -g http-server

# サーバー起動
cd threejs-experience-20250720-16394913404/src
http-server -p 8000
```

#### PHP
```bash
cd threejs-experience-20250720-16394913404/src
php -S localhost:8000
```

### 3. ブラウザでアクセス
```
http://localhost:8000
```

## 🌍 対応ブラウザ

### デスクトップ
- **Chrome** 56+ ✅
- **Firefox** 51+ ✅
- **Safari** 10+ ✅
- **Edge** 15+ ✅

### モバイル
- **iOS Safari** 10+ ✅
- **Android Chrome** 56+ ✅
- **Samsung Internet** 6.0+ ✅

### WebGL対応確認
体験開始時に自動的にWebGL対応をチェックし、非対応の場合はエラーメッセージを表示します。

## 🔧 トラブルシューティング

### よくある問題と解決方法

#### 1. 画面が真っ黒になる
**原因**: WebGL非対応またはGPUドライバの問題
**解決策**:
- ブラウザを最新版にアップデート
- GPUドライバを最新版に更新
- ハードウェアアクセラレーションを有効にする

#### 2. パノラマ画像が表示されない
**原因**: ファイルパスの問題またはCORS制限
**解決策**:
- ローカルサーバー経由でアクセス（file://ではなくhttp://）
- ファイル名・パスが正しいか確認

#### 3. 音楽が再生されない
**原因**: ブラウザの自動再生ポリシー
**解決策**:
- 再生ボタンを手動でクリック
- ブラウザの音声設定を確認

#### 4. 動作が重い・カクつく
**原因**: パーティクル数が多すぎる、またはデバイスの性能不足
**解決策**:
- パーティクル数を減らす（1000個以下）
- パーティクルサイズを小さくする
- 他のアプリケーションを閉じる

#### 5. モバイルで操作できない
**原因**: タッチイベントの問題
**解決策**:
- ページを再読み込み
- ブラウザを再起動
- 他のモバイルブラウザで試す

### パフォーマンス最適化

#### 低スペックデバイス向け設定
- **パーティクル数**: 500個以下
- **パーティクルサイズ**: 0.3以下
- **回転速度**: 0.005以下

#### 高性能デバイス向け設定
- **パーティクル数**: 3000～5000個
- **パーティクルサイズ**: 1.0～2.0
- **回転速度**: 0.02～0.03

## 📱 モバイル最適化

- **レスポンシブデザイン**: 画面サイズに自動適応
- **タッチ操作**: スワイプとダブルタップに対応
- **パフォーマンス調整**: モバイル向けの軽量設定
- **UI調整**: タッチ操作しやすいボタンサイズ

## 🔐 セキュリティとプライバシー

- **外部通信なし**: すべてのリソースはローカルファイル
- **Cookie不使用**: 個人情報の収集なし
- **CDN利用**: Three.jsライブラリのみ外部CDNを使用
- **HTTPS対応**: セキュアな環境での動作保証

## 📝 ライセンス

このプロジェクトは教育・個人利用目的で作成されています。商用利用の場合は使用する画像・音楽のライセンスを確認してください。

## 🎨 カスタマイズ

### 背景画像の変更
`panorama.jpg`を別の360度パノラマ画像に差し替えることで、背景を変更できます。

### BGMの変更
`generated-music.wav`を別の音楽ファイルに差し替えることで、BGMを変更できます。

### パーティクルの調整
HTMLファイル内のJavaScriptコードを編集することで、パーティクルの動きや見た目をカスタマイズできます。

---

🌸 **美しい桜の世界をお楽しみください！** 🌸