# 🌸 桜がテーマの万華鏡の美しく幻想的な世界

WebGL・Three.jsを使用したインタラクティブな3D体験アプリケーション

## 📖 体験コンセプト

桜の花びらをモチーフにした万華鏡のような美しく幻想的な3D空間を提供します。リアルタイムで変化するパーティクルエフェクト、没入感のあるパノラマ背景、そして心地よいBGMが織りなす、まるで桜吹雪の中にいるような体験をお楽しみください。

### 主な特徴
- 🌸 ハート型の桜パーティクルによる万華鏡エフェクト
- 🎨 リアルタイムカラーコントロール（単色・グラデーション・レインボー）
- 🎵 統合された音楽システム（BGMオン/オフ制御）
- 📱 フルレスポンシブデザイン（PC・タブレット・スマートフォン対応）
- ⚙️ リアルタイムパラメータ調整機能

## 🎮 操作方法

### マウス操作（PC）
- **ドラッグ**: 視点移動・カメラ回転
- **マウスホイール**: ズームイン・ズームアウト
- **ダブルクリック**: 自動回転のオン/オフ切り替え

### タッチ操作（モバイル）
- **スワイプ**: 視点移動・カメラ回転
- **ピンチ**: ズームイン・ズームアウト
- **ダブルタップ**: 自動回転のオン/オフ切り替え

### UIコントロール
- **パーティクル色制御**: 単色・グラデーション・レインボーモード切り替え
- **カラーピッカー**: 基本色の設定
- **回転速度**: 自動回転スピードの調整
- **パーティクルサイズ**: 桜パーティクルの大きさ調整
- **パーティクル数**: 表示される桜の数の調整（100-5000個）
- **音楽制御**: BGMのオン/オフと音量調整

## 🔧 技術仕様

### 使用技術
- **Three.js r128**: 3Dグラフィックスエンジン
- **WebGL**: ハードウェアアクセラレーション3Dレンダリング
- **HTML5 Canvas**: 高性能レンダリング
- **Web Audio API**: オーディオ統合

### 動作要件
- **WebGL対応ブラウザ**: 必須
- **推奨メモリ**: 4GB以上
- **推奨GPU**: 統合グラフィックス以上

### 対応ブラウザ
✅ **デスクトップ**
- Chrome 90+ (推奨)
- Firefox 88+
- Safari 14+
- Edge 90+

✅ **モバイル**
- iOS Safari 14+
- Chrome Mobile 90+
- Samsung Internet 14+

### パフォーマンス最適化機能
- 自動デバイス検出とパフォーマンス調整
- レスポンシブ品質設定
- メモリ使用量最適化
- バッテリー効率の考慮

## 🚀 ローカル実行方法

### 方法1: 簡単実行（推奨）
```bash
# Python 3がインストールされている場合
cd src
python3 -m http.server 8000

# Python 2の場合
cd src
python -m SimpleHTTPServer 8000
```

ブラウザで `http://localhost:8000` にアクセス

### 方法2: Node.js使用
```bash
# グローバルにhttp-serverをインストール
npm install -g http-server

# srcディレクトリで実行
cd src
http-server -p 8000
```

### 方法3: ブラウザ直接
一部のブラウザではファイルプロトコル (`file://`) での実行も可能ですが、音楽ファイルの読み込みに制限がある場合があります。

## 📁 ファイル構成

```
threejs-experience-20250720-16394139791/
├── README.md                 # このファイル
├── src/                      # アプリケーションファイル
│   ├── index.html           # メインアプリケーション (30KB)
│   ├── panorama.jpg         # 背景パノラマ画像 (2.1MB)
│   └── generated-music.wav  # BGM音楽ファイル (6.1MB)
├── assets/                   # 追加アセット
│   └── panorama.jpg         # バックアップパノラマ画像
├── music/                    # 音楽ファイル
│   └── generated-music.wav  # バックアップ音楽ファイル
└── final/                    # 配布用パッケージ
    └── threejs-experience.zip
```

## 🛠️ トラブルシューティング

### よくある問題と解決方法

#### ❌ 「WebGL is not supported」エラー
**原因**: ブラウザまたはデバイスがWebGLに対応していない
**解決方法**: 
- 最新ブラウザにアップデート
- ハードウェアアクセラレーションを有効化
- 別のデバイスで試行

#### ❌ 音楽が再生されない
**原因**: ブラウザの自動再生制限またはファイル読み込みエラー
**解決方法**:
- 手動で音楽ボタンをクリック
- HTTPSでアクセス
- ローカルサーバーで実行

#### ❌ パフォーマンスが低い
**原因**: デバイスの性能不足またはパーティクル数の設定が高すぎる
**解決方法**:
- パーティクル数を減少（推奨: 1000-2000）
- ブラウザの他のタブを閉じる
- バックグラウンドアプリを終了

#### ❌ 画面が真っ黒
**原因**: パノラマ画像の読み込み失敗
**解決方法**:
- ファイルパスの確認
- ネットワーク接続の確認
- ブラウザのキャッシュクリア

#### ❌ 操作が効かない
**原因**: JavaScriptエラーまたはイベントリスナーの問題
**解決方法**:
- ページのリロード
- ブラウザコンソールでエラー確認
- 別のブラウザで試行

### デバッグ情報の確認
1. ブラウザの開発者ツールを開く（F12）
2. Consoleタブでエラーメッセージを確認
3. Networkタブでファイル読み込み状況を確認

## 🔒 セキュリティ考慮事項

- すべてのファイルパスは相対パス使用
- 外部CDNはHTTPS接続
- コンテンツセキュリティポリシー適用可能
- XSSやクロスサイト攻撃への対策実装

## 📊 品質チェック項目

✅ **機能性**
- WebGL初期化とエラーハンドリング
- レスポンシブデザインの実装
- オーディオ統合機能
- パフォーマンス最適化

✅ **互換性**
- マルチブラウザ対応
- モバイルデバイス対応
- 異なる画面サイズ対応

✅ **エラー処理**
- WebGL非対応時の適切なメッセージ
- ファイル読み込み失敗時のフォールバック
- パフォーマンス低下時の自動調整

## 📜 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能提案は、GitHubのIssuesでお願いします。

## 📞 サポート

技術的な問題や質問がある場合は、以下の情報を含めてお問い合わせください：
- 使用ブラウザとバージョン
- デバイス情報（OS、GPU）
- エラーメッセージまたは問題の詳細

---

**🌸 桜の万華鏡世界をお楽しみください！**