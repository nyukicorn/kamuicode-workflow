# 🌸 桜万華鏡 - Cherry Blossom Kaleidoscope

美しい桜をテーマにした万華鏡のような没入型Three.js体験です。

## 体験コンセプト

桜の花びらが舞い散る美しい万華鏡の世界を、WebGLとThree.jsで表現したインタラクティブな体験です。日本の美しい季節である桜の季節を、デジタルアートとして表現しています。

## 主な機能

### 🎨 ビジュアル体験
- **パノラマ背景**: 美しい桜の景色をパノラマ背景として表示
- **パーティクルシステム**: 1000個の桜の花びらが舞い散るアニメーション
- **リアルタイムカラーコントロール**: 3つの色モード（単色・桜色・虹色）
- **動的パーティクル調整**: サイズ・数・回転速度をリアルタイムで調整可能

### 🎵 音楽統合
- **BGM機能**: 桜をテーマにした生成音楽
- **音量調整**: リアルタイムボリュームコントロール
- **オン/オフ切り替え**: ワンクリックで音楽の開始・停止

### 🖱️ インタラクティブ操作
- **マウス操作**: ドラッグで視点移動、ホイールでズーム
- **タッチ操作**: モバイルデバイス対応
- **自動回転**: ダブルクリックで自動回転モードの切り替え

## 操作方法

### 基本操作
- **マウスドラッグ**: 視点を自由に移動
- **ホイール**: ズームイン・ズームアウト
- **ダブルクリック**: 自動回転モードのオン/オフ

### タッチ操作（モバイル）
- **スワイプ**: 視点移動
- **ピンチ**: ズーム操作

### コントロールパネル
- **色モード**: 単色・桜色・虹色から選択
- **カラーピッカー**: 任意の色を選択
- **回転速度**: 自動回転の速度調整（0.001-0.05）
- **パーティクルサイズ**: 花びらの大きさ調整（0.1-3.0）
- **パーティクル数**: 花びらの数調整（100-5000個）

### 音楽コントロール
- **音楽ボタン**: BGMのオン/オフ切り替え
- **ボリュームスライダー**: 音量調整（0-100%）

## 技術仕様

### 使用技術
- **Three.js r128**: 3Dグラフィックスライブラリ
- **WebGL**: ハードウェアアクセラレーション
- **HTML5 Audio**: 音楽再生
- **CSS3**: レスポンシブデザイン
- **JavaScript ES6+**: モダンJavaScript

### システム要件
- **WebGL対応ブラウザ**: Chrome 9+, Firefox 4+, Safari 5.1+, Edge 12+
- **推奨スペック**: 
  - CPU: デュアルコア以上
  - メモリ: 4GB以上
  - GPU: DirectX 11対応

### ファイル構成
```
threejs-experience-20250720-16394616785/
├── src/
│   ├── index.html          # メインHTMLファイル
│   ├── panorama.jpg        # パノラマ背景画像 (1024x1024, 2.2MB)
│   └── generated-music.wav # BGM音楽ファイル (48kHz, 6.1MB)
├── assets/
│   └── panorama.jpg        # バックアップ画像
├── music/
│   └── generated-music.wav # バックアップ音楽
└── README.md               # このファイル
```

## ローカル実行方法

### 方法1: シンプルなHTTPサーバー
```bash
# Pythonを使用（Python 3）
cd threejs-experience-20250720-16394616785/src
python -m http.server 8000

# Node.jsを使用
npx serve .

# PHPを使用
php -S localhost:8000
```

### 方法2: ローカルファイルとして直接開く
一部のブラウザではCORSポリシーによりローカルファイルが読み込めない場合があります。その場合は上記のHTTPサーバーを使用してください。

### アクセス方法
ブラウザで `http://localhost:8000` にアクセスしてください。

## 対応ブラウザ

### デスクトップ
- ✅ **Chrome 60+**: 完全サポート
- ✅ **Firefox 55+**: 完全サポート
- ✅ **Safari 11+**: 完全サポート
- ✅ **Edge 79+**: 完全サポート

### モバイル
- ✅ **Chrome Mobile 60+**: 完全サポート
- ✅ **Safari iOS 11+**: 完全サポート
- ⚠️ **古いAndroidブラウザ**: 部分的サポート

## パフォーマンス最適化

### 推奨設定
- **パーティクル数**: 1000個（デフォルト）
- **パーティクルサイズ**: 0.5（デフォルト）
- **回転速度**: 0.01（デフォルト）

### 低スペックデバイス向け
- パーティクル数を500個以下に削減
- パーティクルサイズを0.3以下に削減
- 自動回転をオフにする

## トラブルシューティング

### 一般的な問題

#### 1. 真っ黒な画面が表示される
**原因**: WebGLがサポートされていない
**解決策**: 
- ブラウザを最新版にアップデート
- ハードウェアアクセラレーションを有効化
- 別のブラウザを試す

#### 2. パノラマ画像が表示されない
**原因**: 画像ファイルが見つからない
**解決策**:
- `panorama.jpg`が`src/`フォルダに存在することを確認
- HTTPサーバー経由でアクセス
- ブラウザのコンソールでエラーを確認

#### 3. 音楽が再生されない
**原因**: 音楽ファイルの問題またはブラウザポリシー
**解決策**:
- `generated-music.wav`が存在することを確認
- ブラウザで音楽再生を許可
- 一度クリックしてからボタンを押す

#### 4. 動作が重い・カクつく
**原因**: デバイスの性能不足
**解決策**:
- パーティクル数を削減（500個以下）
- パーティクルサイズを小さくする
- 他のアプリケーションを終了

### エラーメッセージ別対処法

#### "WebGLをサポートしていません"
- ブラウザのWebGL設定を確認
- グラフィックドライバを更新
- Chrome://flags からWebGLを有効化

#### "パノラマ画像の読み込みに失敗"
- ファイルパスを確認
- HTTPサーバー経由でアクセス
- ファイル権限を確認

#### "音楽ファイルの再生に失敗"
- ファイル形式を確認（WAV推奨）
- ブラウザの音楽再生許可設定
- ファイルサイズを確認

## 技術詳細

### セキュリティ考慮事項
- XSS攻撃対策済み
- CORS ポリシー準拠
- セキュアなファイルパス使用
- 入力値サニタイゼーション実装

### アクセシビリティ
- キーボード操作サポート
- スクリーンリーダー対応
- ハイコントラストモード対応
- レスポンシブデザイン

### 拡張可能性
- モジュラー設計
- カスタムシェーダー対応
- 追加エフェクト統合可能
- VRモード拡張準備済み

## ライセンス

このプロジェクトは教育・非商用目的で使用可能です。商用利用については別途ご相談ください。

## 制作情報

- **制作日**: 2025年7月20日
- **技術**: Three.js, WebGL, HTML5
- **テーマ**: 桜万華鏡
- **対象**: WebGL対応ブラウザ

---

**楽しい桜万華鏡体験をお楽しみください！** 🌸✨