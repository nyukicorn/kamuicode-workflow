# 万華鏡の世界 - Three.js パノラマ体験

## 🌸 体験コンセプト

「万華鏡のよう南華経のような美しい世界」をテーマにした没入型3D体験です。パノラマビューと色とりどりのパーティクルが織りなす幻想的な空間で、瞑想的なひとときをお楽しみください。

## ✨ 主な機能

- **360度パノラマビュー**: 美しい万華鏡パターンの完全なパノラマ環境
- **動的パーティクルシステム**: 色とりどりの粒子が踊る幻想的な空間
- **スムーズなカメラ制御**: マウスやタッチで直感的に視点を移動
- **自動回転モード**: 自動で回転して全体を眺めることができます
- **パーティクル制御**: パーティクル数を調整して好みの密度に設定
- **レスポンシブデザイン**: デスクトップ・タブレット・スマートフォンに対応

## 🎮 操作方法

### デスクトップ
- **マウスドラッグ**: 視点の移動
- **マウスホイール**: ズームイン・ズームアウト
- **ダブルクリック**: 自動回転モードの切り替え

### モバイル・タブレット
- **スワイプ**: 視点の移動
- **ピンチ**: ズーム（一部デバイス）
- **ダブルタップ**: 自動回転モードの切り替え

### UIコントロール
- **🔄 自動回転ボタン**: 自動回転のオン・オフ
- **パーティクルスライダー**: パーティクル数の調整（500-3000個）

## 🔧 技術仕様

### 必要な環境
- **WebGL対応ブラウザ**が必須
- **JavaScript有効**である必要があります
- **推奨メモリ**: 4GB以上

### 使用技術
- **Three.js r128**: 3Dグラフィックスライブラリ
- **WebGL**: ハードウェアアクセラレーション
- **Canvas API**: レンダリング
- **ES6 JavaScript**: モダンなJavaScript機能

### 対応ブラウザ
- ✅ Chrome 90+
- ✅ Firefox 85+
- ✅ Safari 14+
- ✅ Edge 90+
- ⚠️ Internet Explorer: 非対応

## 🚀 ローカル実行方法

### 1. ファイルダウンロード
```bash
# リポジトリからダウンロードまたは
# zipファイルを解凍
```

### 2. ローカルサーバー起動
```bash
# Python 3を使用する場合
python -m http.server 8000

# Python 2を使用する場合
python -m SimpleHTTPServer 8000

# Node.jsを使用する場合
npx http-server

# VS Codeの場合
# Live Server拡張機能を使用
```

### 3. ブラウザでアクセス
```
http://localhost:8000/src/index.html
```

### 注意事項
- **ローカルサーバーが必要**: セキュリティ制限により、file://プロトコルでは動作しません
- **CORS制限**: パノラマ画像の読み込みにHTTPサーバーが必要です

## 📁 ファイル構成

```
threejs-experience-20250719-16385930651/
├── README.md                 # このファイル
├── src/
│   ├── index.html           # メインHTMLファイル
│   └── panorama.jpg         # パノラマ画像（1.9MB）
├── assets/
│   ├── panorama.jpg         # バックアップパノラマ画像
│   └── panorama.png         # PNG版パノラマ画像
├── images/
│   └── generated-image.png  # 生成画像
└── final/
    └── (パッケージ用ディレクトリ)
```

## ⚡ パフォーマンス最適化

### 推奨設定
- **パーティクル数**: 1500個（デフォルト）
- **低スペック端末**: 500-1000個に調整
- **高性能端末**: 2000-3000個まで対応

### 最適化ポイント
- テクスチャサイズは1920x1080に最適化済み
- パーティクルシステムはGPUアクセラレーション対応
- レンダリングはrequestAnimationFrameで最適化

## 🔍 トラブルシューティング

### よくある問題

#### 1. 画面が真っ暗になる
**原因**: WebGL非対応またはパノラマ画像の読み込み失敗
**解決方法**: 
- WebGL対応ブラウザを使用
- ローカルサーバーから実行
- コンソールでエラーメッセージを確認

#### 2. パーティクルが表示されない
**原因**: グラフィックスドライバーの問題
**解決方法**:
- ブラウザのハードウェアアクセラレーションを有効化
- ブラウザを最新版に更新
- パーティクル数を減らして実行

#### 3. 動作が重い
**原因**: 高いパーティクル数またはデバイスの性能不足
**解決方法**:
- パーティクル数を500-1000に減らす
- 他のアプリケーションを終了
- ブラウザのタブを減らす

#### 4. タッチ操作が効かない
**原因**: タッチイベントの競合
**解決方法**:
- ページを再読み込み
- ブラウザキャッシュをクリア

### デバッグ方法
1. **F12**でデベロッパーツールを開く
2. **Console**タブでエラーメッセージを確認
3. **Network**タブでファイル読み込み状況を確認

## 🎨 カスタマイズ

### パノラマ画像の変更
1. `src/panorama.jpg`を任意の360度画像に置き換え
2. **推奨サイズ**: 2048x1024または4096x2048
3. **フォーマット**: JPEGまたはPNG

### パーティクルの調整
`index.html`の以下の値を変更:
```javascript
let particleCount = 1500; // パーティクル数
// パーティクルサイズ
size: 0.5,
// 透明度  
opacity: 0.8,
```

## 📊 技術詳細

### レンダリングパイプライン
1. **シーン初期化**: Three.jsシーンとカメラの設定
2. **パノラマ読み込み**: テクスチャロードと球体への適用
3. **パーティクル生成**: BufferGeometryによる効率的な描画
4. **アニメーションループ**: requestAnimationFrameによる60FPS描画

### パフォーマンス指標
- **初期読み込み時間**: 2-5秒（ネットワーク環境による）
- **フレームレート**: 60FPS（推奨設定時）
- **メモリ使用量**: 150-300MB（ブラウザとパーティクル数による）

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 クレジット

- **Three.js**: Three.js開発チーム
- **パノラマ画像**: AI生成による万華鏡パターン
- **開発**: Claude Code & AI Assistant

---

**Enjoy the kaleidoscopic journey! 🌸✨**