# 🌸 花畑パノラマ VR体験

テスト用のシンプルな花畑をパノラマVRで体験できるWebアプリケーションです。Three.jsとWebGLを使用して、没入感のある360度パノラマビューとパーティクルエフェクトを提供します。

## 🎯 体験コンセプト

- **テーマ**: シンプルな花畑パノラマ
- **技術**: Three.js + WebGL + パーティクルシステム
- **音楽**: なし（パノラマ+パーティクルのみ）
- **対象**: デスクトップ・モバイル両対応

## 🎮 操作方法

### デスクトップ（マウス操作）
- **🖱️ マウスドラッグ**: 視点移動（上下左右）
- **🔄 ホイール**: ズームイン/アウト（FOV 10-120度）
- **⚡ ダブルクリック**: 自動回転ON/OFF切り替え

### モバイル（タッチ操作）
- **📱 タッチドラッグ**: 視点移動（シングルタッチ）
- **ピンチ**: ズーム機能（今後のアップデートで対応予定）

## 🔧 技術仕様

### 必要な環境
- **WebGL対応ブラウザ**: Chrome 51+, Firefox 51+, Safari 10+, Edge 79+
- **JavaScript**: ES6対応
- **画面解像度**: 任意（レスポンシブ対応）

### 使用技術
- **Three.js**: r128 (CDN)
- **WebGL**: ハードウェアアクセラレーション必須
- **CSS3**: モダンブラウザ機能（backdrop-filter等）

### パフォーマンス
- **パーティクル数**: 1,500個
- **ジオメトリ**: 球体（60x40分割）
- **テクスチャ**: 1.4MB JPEG（最適化済み）
- **フレームレート**: 60fps目標

## 🚀 ローカル実行方法

### 方法1: 簡易HTTPサーバー（推奨）

```bash
# Python3がインストールされている場合
cd threejs-experience-20250719-16389990165/src
python3 -m http.server 8000

# Node.jsがインストールされている場合
npx http-server . -p 8000

# ブラウザで以下にアクセス
# http://localhost:8000
```

### 方法2: Live Server拡張機能
1. VS Codeで`src/index.html`を開く
2. Live Server拡張機能をインストール
3. 右クリック → "Open with Live Server"

### 方法3: 直接ファイル開き（制限あり）
- ブラウザに`src/index.html`を直接ドラッグ&ドロップ
- ⚠️ CORSエラーでテクスチャが読み込まれない可能性があります

## 🌐 対応ブラウザ情報

### 完全対応
- **Chrome**: 51+ (デスクトップ・モバイル)
- **Firefox**: 51+ (デスクトップ・モバイル)  
- **Safari**: 10+ (デスクトップ・モバイル)
- **Edge**: 79+ (Chromium版)

### 制限付き対応
- **Internet Explorer**: 非対応（WebGL ES6制限）
- **古いAndroidブラウザ**: 一部機能制限の可能性

### パフォーマンス要件
- **GPU**: DirectX 9.0c対応以上
- **RAM**: 1GB以上推奨
- **CPU**: デュアルコア以上推奨

## 🛠️ トラブルシューティング

### よくある問題と解決方法

#### 1. 黒い画面のまま表示されない
**原因**: WebGL非対応またはハードウェアアクセラレーション無効
**解決方法**:
- ブラウザのハードウェアアクセラレーションを有効化
- 最新のグラフィックドライバーに更新
- Chrome: `chrome://settings/` → 詳細設定 → システム → ハードウェアアクセラレーション

#### 2. パノラマ画像が表示されない
**原因**: CORSエラーまたはファイルパス問題
**解決方法**:
- HTTPサーバー経由でアクセス（file://ではなくhttp://）
- `panorama.jpg`が`src/`ディレクトリに存在することを確認

#### 3. 動作が重い・フレームレートが低い
**原因**: ハードウェア性能不足
**解決方法**:
- ブラウザの他のタブを閉じる
- 不要な拡張機能を無効化
- 画面解像度を下げる

#### 4. タッチ操作が反応しない
**原因**: モバイルブラウザの設定問題
**解決方法**:
- ページをリロード
- ブラウザのキャッシュをクリア
- プライベートモードで確認

#### 5. 自動回転が期待通りに動作しない
**原因**: パフォーマンス問題またはイベント競合
**解決方法**:
- ダブルクリック/ダブルタップで切り替え再試行
- ページリロード後に再実行

### エラーメッセージ対応

#### "WebGLがサポートされていません"
- ブラウザとドライバーの更新
- ハードウェアアクセラレーション確認

#### "パノラマ画像の読み込みに失敗しました"
- ファイルパスの確認
- HTTPサーバー使用の確認
- ネットワーク接続の確認

## 📁 ファイル構成

```
threejs-experience-20250719-16389990165/
├── README.md                 # このファイル
├── src/
│   ├── index.html           # メインHTML（14KB）
│   └── panorama.jpg         # パノラマ画像（1.4MB）
├── assets/
│   ├── panorama.jpg         # 追加のパノラマ画像
│   └── panorama.png         # PNG版（未使用）
├── images/
│   └── generated-image.png  # 生成元画像
├── final/
│   └── threejs-experience.zip # 配布用パッケージ
└── google-image-url.txt     # 画像ソースURL
```

## 🎨 カスタマイズ方法

### パノラマ画像の変更
1. `src/panorama.jpg`を置き換え
2. ファイル名が同じであることを確認
3. 推奨解像度: 4096x2048px以上

### パーティクル設定の調整
```javascript
// index.html内で以下を変更
const particleCount = 1500;        // パーティクル数
const particleMaterial = new THREE.PointsMaterial({
    color: 0xffffff,               // 色
    size: 0.6,                     // サイズ
    opacity: 0.8                   // 透明度
});
```

### カメラ設定の調整
```javascript
// FOV範囲の変更
camera.fov = Math.max(10, Math.min(120, fov));

// 回転速度の調整
let rotationSpeed = 0.001;         // 自動回転速度
```

## 📝 開発者向け情報

### コード構造
- **初期化**: WebGL対応チェック → Three.js初期化
- **アセット読み込み**: テクスチャローダーでパノラマ画像
- **パーティクル**: BufferGeometry使用で高性能化
- **制御**: マウス・タッチイベントハンドリング
- **アニメーション**: requestAnimationFrame使用

### パフォーマンス最適化
- BufferGeometry使用でメモリ効率化
- sizeAttenuation有効でリアルな距離感
- アンチエイリアシング有効で高品質レンダリング

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献・フィードバック

バグ報告や機能要望は以下まで：
- イシュー報告: GitHub Issues
- 改善提案: Pull Request歓迎

---

**バージョン**: 1.0.0  
**作成日**: 2025年7月19日  
**最終更新**: 2025年7月19日