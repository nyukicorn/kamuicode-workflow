# 美しい和傘が舞う京都の庭園 - VR体験

## 🌸 体験コンセプト

美しい和の情景を360度パノラマVRで体験できるインタラクティブWebアプリケーションです。京都の庭園をイメージした落ち着いた空間で、色とりどりの和傘がふわりと舞い踊り、桜の花びらが舞い散る幻想的な世界をお楽しみいただけます。

### ✨ 体験の特徴
- **360度パノラマVR**: 京都の庭園を360度見渡せる没入感
- **和傘パーティクル**: 15個の美しい和傘がゆったりと舞い踊る
- **桜吹雪エフェクト**: 200個の桜の花びらが風に舞う演出
- **BGM機能**: 和の雰囲気に合った音楽でより深い体験
- **レスポンシブ対応**: PC・タブレット・スマートフォンに対応

## 🎮 操作方法

### マウス操作（PC）
- **視点移動**: マウスドラッグで360度回転
- **ズーム**: マウスホイールでズームイン/アウト
- **音楽制御**: 右上の🎵ボタンでBGMのオン/オフ
- **音量調整**: 🔊スライダーで音量調整

### タッチ操作（スマートフォン・タブレット）
- **視点移動**: 指でドラッグして360度回転
- **ピンチズーム**: 2本指でズームイン/アウト
- **音楽制御**: 画面右上の🎵ボタン

### キーボード操作（PC）
- **矢印キー**: 視点の細かい調整
- **W/S キー**: ズームイン/アウト
- **M キー**: 音楽のオン/オフ切り替え
- **R キー**: 自動回転モードの切り替え
- **スペースキー**: 視点リセット

## 🛠️ 技術仕様

### 必要な環境
- **WebGL対応ブラウザ**: 必須
- **推奨ブラウザ**:
  - Chrome 90+
  - Firefox 88+
  - Safari 14+
  - Edge 90+

### 使用技術
- **Three.js**: 3Dグラフィックスライブラリ
- **WebGL**: ハードウェアアクセラレーション
- **Web Audio API**: 高品質オーディオ再生
- **ES6+**: モダンJavaScript
- **CSS3**: レスポンシブデザイン

### パフォーマンス
- **パノラマ画像**: 1.1MB（最適化済み）
- **パーティクル数**: 和傘15個 + 桜の花びら200個
- **対象FPS**: 60fps
- **メモリ使用量**: 約50-100MB

## 🚀 ローカル実行方法

### 1. ファイルの準備
```bash
# プロジェクトフォルダを任意の場所に配置
threejs-experience-20250719-16385462254/
├── src/
│   ├── index.html
│   ├── css/style.css
│   ├── js/
│   └── libs/
├── assets/panorama.jpg
├── music/generated-music.wav
└── README.md
```

### 2. ローカルサーバーの起動

**方法1: Python (推奨)**
```bash
# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

**方法2: Node.js (http-server)**
```bash
npm install -g http-server
http-server -p 8000
```

**方法3: Live Server (VS Code拡張機能)**
1. VS CodeでLive Server拡張機能をインストール
2. index.htmlを右クリック
3. "Open with Live Server"を選択

### 3. ブラウザでアクセス
```
http://localhost:8000/src/index.html
```

## 📱 対応ブラウザ・デバイス

### デスクトップ
- ✅ Chrome 90+ (推奨)
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

### モバイル
- ✅ iOS Safari 14+
- ✅ Android Chrome 90+
- ✅ Samsung Internet 13+

### タブレット
- ✅ iPad (iOS 14+)
- ✅ Android タブレット (Chrome 90+)

## ⚠️ トラブルシューティング

### よくある問題と解決方法

#### 🔴 「WebGLに対応していません」エラー
**原因**: ブラウザがWebGLをサポートしていない、または無効になっている
**解決方法**:
1. 最新のブラウザに更新
2. Chrome設定で WebGL を有効化
   - `chrome://flags/#disable-webgl` にアクセス
   - "WebGL" を "Enabled" に設定
3. GPU ドライバーの更新

#### 🔴 パノラマ画像が表示されない
**原因**: ファイルパスの問題またはCORSエラー
**解決方法**:
1. ローカルサーバーを使用（file://ではなくhttp://）
2. assets/panorama.jpg の存在確認
3. ブラウザの開発者ツールでエラーチェック

#### 🔴 音楽が再生されない
**原因**: ブラウザの自動再生ポリシー
**解決方法**:
1. ページ読み込み後、手動で🎵ボタンをクリック
2. ブラウザの音声設定を確認
3. music/generated-music.wav の存在確認

#### 🔴 動作が重い・カクツク
**原因**: デバイスの性能不足
**解決方法**:
1. 他のアプリケーション・タブを閉じる
2. ブラウザのハードウェアアクセラレーションを有効化
3. 画面解像度を下げる
4. 古いデバイスでは軽量モードの使用を検討

#### 🔴 モバイルで操作できない
**原因**: タッチイベントの競合
**解決方法**:
1. ページを再読み込み
2. シングルタッチでの操作を確認
3. ブラウザの標準ズーム機能と競合していないか確認

### パフォーマンス最適化

#### 低スペックデバイス向け
- パーティクル数を減らす（particles.js:18行目、101行目の数値変更）
- レンダリング品質を下げる（scene.js:27行目のsetPixelRatio値を1に固定）
- 影の無効化（scene.js:28行目をコメントアウト）

#### 高スペックデバイス向け
- アンチエイリアシングの強化
- パーティクル数の増加
- 追加エフェクトの実装

## 📁 ファイル構成

```
threejs-experience-20250719-16385462254/
├── README.md                   # このファイル
├── src/                        # メインソースコード
│   ├── index.html             # エントリーポイント
│   ├── css/
│   │   └── style.css          # スタイルシート
│   ├── js/
│   │   ├── main.js            # メインアプリケーションクラス
│   │   ├── scene.js           # Three.jsシーン管理
│   │   ├── particles.js       # パーティクルシステム
│   │   └── controls.js        # カメラコントロール
│   └── libs/
│       ├── three.min.js       # Three.jsライブラリ
│       └── OrbitControls.js   # オービットコントロール
├── assets/
│   └── panorama.jpg           # 360度パノラマ画像 (1.1MB)
├── music/
│   └── generated-music.wav    # BGM音楽ファイル
├── images/                    # 生成プロセス用画像
└── final/                     # 最終パッケージ用フォルダ
```

## 🔒 セキュリティ

- **XSS対策**: ユーザー入力の適切なエスケープ
- **CORS対応**: ローカルサーバーでの実行推奨
- **CSP準拠**: Content Security Policy対応
- **プライバシー**: ユーザーデータの収集なし

## 📄 ライセンス

このプロジェクトはMITライセンスの下で配布されています。

## 🤝 貢献

バグ報告や機能提案は GitHub Issues までお願いします。

---

**🎌 Enjoy the beautiful Japanese garden VR experience! 🎌**